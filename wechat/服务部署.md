# 前端vue部署

请提前执行以下代码编译项目文件的到dist文件

```powershell
npm run build
```

##### 1.创建站点目录

```bash
# 推荐路径（自己随便改）

sudo mkdir -p /var/www/blog          # 创建站点目录
sudo chown $USER:$USER /var/www/blog  # 给自己权限方便复制

# 把打包好的 dist 完全覆盖进去

rsync -avh --delete dist/ /var/www/blog/

# 或者直接 cp

sudo cp -r dist/* /var/www/blog/
```

##### 创建 Nginx 站点配置文件

```bash
sudo nano /etc/nginx/sites-available/blog
```

写入配置文件

```nginx
# blog
server {
    listen 80;
    listen [::]:80;
    server_name martin88.xyz www.martin88.xyz 121.40.127.17;

    root /var/www/dist;
    index index.html;

    location / {
        try_files $uri /index.html;
    }
}


# server {
#    listen 80;
#    listen [::]:80;
#    server_name 121.40.127.17;
#
#    # 301 永久重定向到主域名
#    return 301 http://martin88.xyz$request_uri;
#}
```

### 3. 启用站点

```bash
sudo ln -s /etc/nginx/sites-available/blog /etc/nginx/sites-enabled/
```

### 4. 检查配置 + 重载 Nginx

Bash

```
sudo nginx -t                    # 检查语法
sudo nginx -s reload             # 平滑重载（推荐）
# 或者
sudo systemctl reload nginx
```

# 后端fastAPI

-   systemctl开启fastapi-blog.server 配置
-   快速 CI/CD（GitHub Actions / Gitee CI）

当然本网站使用GitHub Actions的方法

如果有一天、我忘记了我的配置。

希望我还能看看、帮我回忆回忆。