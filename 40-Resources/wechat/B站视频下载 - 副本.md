---
created: 2025-12-17 15:23
author: natsume37
category:
tags:
  - 
---
# B ç«™è§†é¢‘ä¸‹è½½åˆ†æ

æœ€è¿‘åœ¨å­¦ä¹ ä¸€äº›è¯¾ç¨‹æ—¶ï¼Œç»å¸¸éœ€è¦ç”¨åˆ° **B ç«™çš„åŸå§‹è§†é¢‘æ–‡ä»¶**ã€‚  
å°†åŸè§†é¢‘é…åˆé˜¿é‡Œçš„ [é€šä¹‰å¬æ‚Ÿ](https://tingwu.aliyun.com/home) ä½¿ç”¨ï¼Œå¯ä»¥éå¸¸é«˜æ•ˆåœ°å®Œæˆï¼š

- è¯¾ç¨‹ç¬”è®°æ•´ç†
    
- è‡ªåŠ¨ç”Ÿæˆæ–‡å­—ç¨¿
    
- éŸ³é¢‘ä¿¡æ¯é‡‡é›†ï¼Œæ–¹ä¾¿åç»­å¤ä¹ ä¸äºŒæ¬¡å­¦ä¹ 
    

æ•´ä½“ä½“éªŒéå¸¸ä¸é”™ï¼Œä¹Ÿå¤§å¤§æé«˜äº†å­¦ä¹ æ•ˆç‡ã€‚

![](https://natsume-1316988601.cos.ap-chengdu.myqcloud.com/image_own/file-20251217153456057.png)

è¿™é‡Œéšä¾¿é€‰äº†ä¸€ä¸ªè§†é¢‘ä½œä¸ºç¤ºä¾‹ï¼ˆè¿™æ˜¯æˆ‘ Python çš„å¯è’™è€å¸ˆï¼Œè¯¾ç¨‹è´¨é‡å¾ˆé«˜ï¼Œå†…å®¹éå¸¸æ‰å®ï¼Œå¼ºçƒˆæ¨èï¼‰ã€‚

---

## è¯·æ±‚åˆ†æ

é¦–å…ˆç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ä¸€ä¸ª B ç«™è§†é¢‘é¡µé¢ï¼š

![](https://natsume-1316988601.cos.ap-chengdu.myqcloud.com/image_own/file-20251217154228036.png)

å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªè¯·æ±‚æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ **é¡µé¢è¯·æ±‚**ã€‚  
æˆ‘ä»¬é‡ç‚¹å…³æ³¨å®ƒçš„è¿”å›å†…å®¹ã€‚

![](https://natsume-1316988601.cos.ap-chengdu.myqcloud.com/image_own/file-20251217154357156.png)

è¿”å›çš„æ˜¯ä¸€ä¸ªå®Œæ•´çš„ **HTML é¡µé¢**ã€‚

ç»§ç»­å‘ä¸‹æŸ¥çœ‹é¡µé¢æºç ï¼š

![](https://natsume-1316988601.cos.ap-chengdu.myqcloud.com/image_own/file-20251217154542019.png)

åœ¨é¡µé¢çš„ `script` æ ‡ç­¾ä¸­ï¼Œå¯ä»¥å‘ç°ä¸€æ®µéå¸¸å…³é”®çš„æ•°æ®ç»“æ„ã€‚

![](https://natsume-1316988601.cos.ap-chengdu.myqcloud.com/image_own/file-20251217154709356.png)

![](https://natsume-1316988601.cos.ap-chengdu.myqcloud.com/image_own/file-20251217154741714.png)

è¿™é‡Œé¢åŒ…å«äº†æˆ‘ä»¬æ‰€éœ€è¦çš„**æ ¸å¿ƒä¿¡æ¯**ï¼š

- å½“å‰è´¦å·å¯è®¿é—®çš„ **ä¸åŒåˆ†è¾¨ç‡çš„è§†é¢‘æµ**
    
- å¯¹åº”çš„ **éŸ³é¢‘æµåœ°å€**
    
- è§†é¢‘ã€éŸ³é¢‘å‡ä¸ºç‹¬ç«‹çš„èµ„æºé“¾æ¥
    

---

## DASH æ’­æ”¾æœºåˆ¶è¯´æ˜

é€šè¿‡æŸ¥é˜…èµ„æ–™ï¼ˆä»¥åŠ Gemini çš„è¡¥å……è¯´æ˜ï¼‰å¯ä»¥ç¡®è®¤ï¼š

> **B ç«™é‡‡ç”¨çš„æ˜¯ DASHï¼ˆDynamic Adaptive Streaming over HTTPï¼‰æµåª’ä½“æŠ€æœ¯**

å…¶ç‰¹ç‚¹æ˜¯ï¼š

- **è§†é¢‘æµï¼ˆç”»é¢ï¼‰å’ŒéŸ³é¢‘æµï¼ˆå£°éŸ³ï¼‰åˆ†å¼€ä¼ è¾“**
    
- è§†é¢‘å­˜åœ¨å¤šç§æ¸…æ™°åº¦ä¸ç¼–ç æ ¼å¼
    
- æ’­æ”¾å™¨æ ¹æ®ç½‘ç»œæƒ…å†µåŠ¨æ€é€‰æ‹©åˆé€‚çš„æµ
    

è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨é¡µé¢ä¸­èƒ½åŒæ—¶çœ‹åˆ°å¤šä¸ª video / audio URLã€‚

---

## å®ç°æ€è·¯æ€»ç»“

æ•´ä½“æµç¨‹å¯ä»¥æ‹†è§£ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š

1. **è®¿é—®è§†é¢‘é¡µé¢**
    
    ```text
    https://www.bilibili.com/video/BV1Hx2DBhEve/
    ```
    
2. **ä» HTML ä¸­æå–æ’­æ”¾ä¿¡æ¯**
    
    - ä½¿ç”¨æ­£åˆ™åŒ¹é…ï¼š
        
        ```regex
        window\.__playinfo__=(.*?)</script>
        ```
        
    - å°†å…¶è½¬æ¢ä¸º Python å­—å…¸ï¼Œæ–¹ä¾¿æå– video / audio çš„ URL
        
3. **æºå¸¦è¯·æ±‚å¤´å’Œ Cookie ä¸‹è½½èµ„æº**
    
    - ä½¿ç”¨ `requests`
        
    - å¿…é¡»æºå¸¦ï¼š
        
        - `Cookie`
            
        - `Referer`
            
        - `User-Agent`
            
4. **ä¸‹è½½ m4s æ ¼å¼çš„è§†é¢‘æµå’ŒéŸ³é¢‘æµ**
    
5. **ä½¿ç”¨ FFmpeg åˆå¹¶å¹¶è½¬ç **
    
    - å°† video.m4s + audio.m4s åˆå¹¶
        
    - è¾“å‡ºä¸º MP4 æˆ–å…¶ä»–å¸¸ç”¨æ ¼å¼
        

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### Referer å¿…é¡»æºå¸¦

åœ¨åç»­è¯·æ±‚è§†é¢‘ / éŸ³é¢‘æµæ—¶ï¼Œ**ä¸€å®šè¦åŠ  `Referer`**ï¼Œå¦åˆ™å¾ˆå®¹æ˜“å‡ºç°ï¼š

- 443 é”™è¯¯
    
- è¯·æ±‚è¢«ç›´æ¥æ‹’ç»
    

> ä¸€ä¸ªæ¯”è¾ƒè¿·æƒ‘çš„ç‚¹æ˜¯ï¼š  
> æˆ‘åœ¨å®é™…çˆ¬å–æ—¶ä¸€åº¦æ— æ³•è®¿é—®ï¼Œä½†åœ¨å†™æ–‡ç« ã€å¤ç°æ—¶å´åˆèƒ½æ­£å¸¸è¯·æ±‚äº† ğŸ¤”  
> å¯èƒ½å’Œè¯·æ±‚é¢‘ç‡ã€è´¦å·çŠ¶æ€æˆ–é£æ§æœ‰å…³ã€‚

---

## å®éªŒä»£ç 

```python
import requests

url = r'https://www.bilibili.com/video/BV1Hx2DBhEve/'
cookie = "ä½ è‡ªå·±çš„cookie"
headers = {
    "Referer": url,
    "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36",
}

s = requests.Session()
res = s.get(url, headers=headers)
print(res.text)

# ä¸‹è½½è§†é¢‘æµ
video_url = '...30120.m4s'
video = s.get(video_url, headers=headers)
with open('video.m4s', 'wb') as f:
    f.write(video.content)
print("video downloaded")

# ä¸‹è½½éŸ³é¢‘æµ
audio_url = '...30280.m4s'
audio = s.get(audio_url, headers=headers)
with open('audio.m4s', 'wb') as f:
    f.write(audio.content)
print("audio downloaded")
```

video å’Œ audio å‡å¯æ­£å¸¸ä¸‹è½½ã€‚

---

## å‚æ•°åŒ–ä¸ä¼˜åŒ–

åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¯ä»¥è¿›ä¸€æ­¥åšä»¥ä¸‹æ”¹è¿›ï¼š

- å°† **è§†é¢‘ URL** å’Œ **Cookie** å‚æ•°åŒ–
    
- å…¶ä»–å†…å®¹å‡å¯å¤ç”¨
    
- å°è¯•è¿‡å†™ç™»å½•è„šæœ¬ï¼Œä½†ç›®å‰ B ç«™å­˜åœ¨ **äºŒç»´ç éªŒè¯**
    
    - è¿™å—è¿˜æ²¡æ·±å…¥ç ”ç©¶
        
    - æš‚æ—¶é€šè¿‡æ‰‹åŠ¨å¤åˆ¶ Cookie è§£å†³
        

æœ€åï¼Œé€šè¿‡ **FFmpeg** å¯¹ä¸‹è½½å¥½çš„ m4s æ–‡ä»¶è¿›è¡Œåˆå¹¶ä¸è½¬ç ï¼Œå³å¯å¾—åˆ°å®Œæ•´çš„ MP4 è§†é¢‘ã€‚

---

## æ•ˆæœå±•ç¤º

![](https://natsume-1316988601.cos.ap-chengdu.myqcloud.com/image_own/file-20251217162433097.png)

---
###  æ³¨æ„

è¯¥æ–‡ä¸»è¦ç”¨äºçˆ¬è™«æŠ€æœ¯çš„æŠ€æœ¯å­¦ä¹ äº¤æµã€å‹¿ç”¨äºéæ³•æ´»åŠ¨